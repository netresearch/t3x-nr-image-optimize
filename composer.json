{
    "name": "netresearch/nr-image-optimize",
    "description": "Add capability to optimize the delivered images to benefit from better compression and smaller image size. This extension also add the ability to process images only if it is really requested.",
    "type": "typo3-cms-extension",
    "license": [
        "GPL-2.0-or-later"
    ],
    "config": {
        "bin-dir": ".build/bin",
        "vendor-dir": ".build/vendor",
        "discard-changes": true,
        "sort-packages": true,
        "optimize-autoloader": true,
        "platform-check": false,
        "allow-plugins": {
            "typo3/cms-composer-installers": true,
            "typo3/class-alias-loader": true
        }
    },
    "require": {
        "php": "^8.1 || ^8.2 || ^8.3 || ^8.4",
        "typo3/cms-core": "^11.5 || ^12.0",
        "intervention/image": "3.7.2 || 3.11.1"
    },
    "require-dev": {
        "typo3/testing-framework": "^6.0 || ^7.0 || ^8.0 || ^9.0",
        "friendsofphp/php-cs-fixer": "^3.1",
        "friendsoftypo3/phpstan-typo3": "^0.9",
        "overtrue/phplint": "^3.4 || ^9.0",
        "phpstan/phpstan": "^1.10",
        "phpstan/phpstan-phpunit": "^1.3",
        "phpstan/phpstan-strict-rules": "^1.5",
        "phpstan/phpstan-deprecation-rules": "^1.1",
        "ssch/typo3-rector": "^2.0 || ^3.0"
    },
    "autoload": {
        "psr-4": {
            "Netresearch\\NrImageOptimize\\": "Classes/"
        }
    },
    "autoload-dev": {
        "psr-4": {
            "Netresearch\\NrImageOptimize\\Tests\\": "Tests/"
        }
    },
    "extra": {
        "typo3/cms": {
            "extension-key": "nr_image_optimize",
            "web-dir": ".build/public"
        },
        "branch-alias": {
            "dev-main": "1.0.x-dev"
        }
    },
    "scripts": {
        "ci:test:php:cgl": [
            "php-cs-fixer fix --config Build/.php-cs-fixer.dist.php --diff --verbose --cache-file .build/.php-cs-fixer.cache --dry-run"
        ],
        "ci:test:php:lint": [
            "phplint --configuration Build/.phplint.yml"
        ],
        "ci:test:php:unit": [
            "XDEBUG_MODE=coverage && phpunit -c Build/UnitTests.xml"
        ],
        "ci:test:php:phpstan": [
            "phpstan analyze --configuration Build/phpstan.neon"
        ],
        "ci:test:php:phpstan:baseline": [
            "phpstan analyze --configuration Build/phpstan.neon --generate-baseline Build/phpstan-baseline.neon --allow-empty-baseline"
        ],
        "ci:test:php:rector": [
            "rector process --config Build/rector.php --dry-run"
        ],
        "ci:test": [
            "@ci:test:php:cgl",
            "@ci:test:php:lint",
            "@ci:test:php:phpstan",
            "@ci:test:php:rector"
        ],
        "ci:cgl": [
            "php-cs-fixer fix --config Build/.php-cs-fixer.dist.php --diff --verbose --cache-file .build/.php-cs-fixer.cache"
        ],
        "ci:php:rector": [
            "rector process --config Build/rector.php"
        ]
    }
}
