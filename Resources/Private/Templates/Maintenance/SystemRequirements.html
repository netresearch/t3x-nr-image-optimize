<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
      xmlns:be="http://typo3.org/ns/TYPO3/CMS/Backend/ViewHelpers"
      xmlns:core="http://typo3.org/ns/TYPO3/CMS/Core/ViewHelpers"
      data-namespace-typo3-fluid="true">

<f:layout name="Module"/>

<f:section name="Content">
    <h1>System Requirements</h1>
    <p class="text-body-secondary">
        Overview of technical prerequisites and their current status
    </p>

    <div class="mb-3">
        <f:link.action action="index" class="btn btn-secondary">
            &laquo; Back to Maintenance
        </f:link.action>
    </div>

    <f:for each="{requirements}" as="category">
        <h2 class="h4 mt-4">{category.label -> f:format.raw()}</h2>
        <table class="table table-striped align-middle">
            <thead>
                <tr>
                    <th style="width:30%">Requirement</th>
                    <th style="width:15%">Status</th>
                    <th style="width:25%">Current</th>
                    <th style="width:15%">Required</th>
                    <th style="width:15%">Details</th>
                </tr>
            </thead>
            <tbody>
                <f:for each="{category.items}" as="item">
                    <tr>
                        <td>{item.label -> f:format.raw()}</td>
                        <td>
                            <span class="badge {item.badgeClass}">
                                <core:icon identifier="{item.icon}" size="small"/>
                                <span class="ms-1">
                                    <f:if condition="{item.status} == 'success'">
                                        <f:then>Available</f:then>
                                        <f:else>
                                            <f:if condition="{item.status} == 'warning'">
                                                <f:then>Limited</f:then>
                                                <f:else>Missing</f:else>
                                            </f:if>
                                        </f:else>
                                    </f:if>
                                </span>
                            </span>
                        </td>
                        <td><code>{item.current}</code></td>
                        <td>
                            <f:if condition="{item.required}">
                                <code>{item.required}</code>
                            </f:if>
                        </td>
                        <td>
                            <f:if condition="{item.details}">
                                <span class="text-body-secondary small" style="word-break: break-word;">{item.details -> f:format.nl2br()}</span>
                            </f:if>
                        </td>
                    </tr>
                </f:for>
            </tbody>
        </table>
    </f:for>
</f:section>

</html>
